
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>[转载] OpenLDAP Installation and Configuration in Ubuntu Server / Debian | Kokonur</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Yafeng Shan">
    

    
    <meta name="description" content="原文链接
OpenLDAP is a free open source Light Weight Directory Access protocol developed by the OpenLDAP project. It is a platform independent protocol, so that it runs on all Linux/Unix like systems, Win">
<meta property="og:type" content="article">
<meta property="og:title" content="[转载] OpenLDAP Installation and Configuration in Ubuntu Server / Debian">
<meta property="og:url" content="http://blog.kokonur.me/2014/03/28/转载-openldap-installation-and-configuration-in-ubuntu-server-debian/index.html">
<meta property="og:site_name" content="Kokonur">
<meta property="og:description" content="原文链接
OpenLDAP is a free open source Light Weight Directory Access protocol developed by the OpenLDAP project. It is a platform independent protocol, so that it runs on all Linux/Unix like systems, Win">
<meta property="og:image" content="http://blog.kokonur.me/uploads/2014/03/unixmen@server-_0011.png">
<meta property="og:image" content="http://blog.kokonur.me/uploads/2014/03/unixmen@server-_0021.png">
<meta property="og:image" content="http://blog.kokonur.me/uploads/2014/03/unixmen@server-_0031.png">
<meta property="og:image" content="http://blog.kokonur.me/uploads/2014/03/unixmen@server-_00111.png">
<meta property="og:image" content="http://blog.kokonur.me/uploads/2014/03/unixmen@server-_00211.png">
<meta property="og:image" content="http://blog.kokonur.me/uploads/2014/03/unixmen@server-_0061.png">
<meta property="og:image" content="http://blog.kokonur.me/uploads/2014/03/unixmen@server-_0071.png">
<meta property="og:image" content="http://blog.kokonur.me/uploads/2014/03/unixmen@server-_0081.png">
<meta property="og:image" content="http://blog.kokonur.me/uploads/2014/03/unixmen@server-_0091.png">
<meta property="og:image" content="http://blog.kokonur.me/uploads/2014/03/unixmen@server-_0101.png">
<meta property="og:image" content="http://blog.kokonur.me/uploads/2014/03/unixmen@server-_0111.png">
<meta property="og:updated_time" content="2016-08-29T00:38:32.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[转载] OpenLDAP Installation and Configuration in Ubuntu Server / Debian">
<meta name="twitter:description" content="原文链接
OpenLDAP is a free open source Light Weight Directory Access protocol developed by the OpenLDAP project. It is a platform independent protocol, so that it runs on all Linux/Unix like systems, Win">
<meta name="twitter:image" content="http://blog.kokonur.me/uploads/2014/03/unixmen@server-_0011.png">
<link rel="publisher" href="110827390075659657828">

    
    <link rel="alternative" href="/atom.xml" title="Kokonur" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/favicon.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/favicon.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Kokonur" title="Kokonur"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Kokonur">Kokonur</a></h1>
				<h2 class="blog-motto">Tofu, fish and more sleep</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/toys">装备</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li>
 					
					<form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" autocomplete="off" name="q" maxlength="20" placeholder="搜索" />
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/03/28/转载-openldap-installation-and-configuration-in-ubuntu-server-debian/" title="[转载] OpenLDAP Installation and Configuration in Ubuntu Server / Debian" itemprop="url">[转载] OpenLDAP Installation and Configuration in Ubuntu Server / Debian</a>
  </h1>
  <p class="article-author">By
    
    <a href="/author/cuckoo" title="Yafeng Shan" target="_blank" itemprop="author">Yafeng Shan</a>
    
  <p class="article-time">
    <time datetime="2014-03-28T02:55:29.000Z" itemprop="datePublished"> 发表于 2014-03-28</time>
    
  </p>
</header>

	<div class="article-content">
		
		<p><a href="http://www.unixmen.com/openldap-installation-configuration-ubuntu-12-1013-0413-10-debian-67-2/" target="_blank" rel="external">原文链接</a></p>
<p><a href="http://www.openldap.org/" target="_blank" rel="external">OpenLDAP</a> is a free open source Light Weight Directory Access protocol developed by the OpenLDAP project. It is a platform independent protocol, so that it runs on all Linux/Unix like systems, Windows, AIX, Solaris and Android.</p>
<p>In this tutorial i am gonna to show you how to install and configure OpenLDAP server in Ubuntu 12.10 server. Though it is tested on Ubuntu 12.10, it may work on Debian too. In this how-to my testbox details are given below.</p>
<pre><code>Operating System : Ubuntu 12.10 Server
Hostname         : server.unixmen.com
IP Address       : 192.168.1.200
</code></pre><p>Replace the above values with your own scenario.</p>
<a id="more"></a>
<h3 id="Install-OpenLDAP-in-Ubuntu-12-10-server"><a href="#Install-OpenLDAP-in-Ubuntu-12-10-server" class="headerlink" title="Install OpenLDAP in Ubuntu 12.10 server"></a>Install OpenLDAP in Ubuntu 12.10 server</h3><pre><code>unixmen@server:~$ sudo apt-get install slapd ldap-utils
</code></pre><p>During the installtion it will ask the password for LDAP admin account. Enter your admin password here.</p>
<p><img src="/uploads/2014/03/unixmen@server-_0011.png" alt="enterpassword"></p>
<p>Re-enter the password.</p>
<p><img src="/uploads/2014/03/unixmen@server-_0021.png" alt="reenterpassword"></p>
<h3 id="Configure-OpenLDAP"><a href="#Configure-OpenLDAP" class="headerlink" title="Configure OpenLDAP"></a>Configure OpenLDAP</h3><p>Open the “<strong>/etc/ldap/ldap.conf</strong>” file and find and edit the lines as shown below with your domain name and IP Address.</p>
<pre><code>unixmen@server:~$ sudo vi /etc/ldap/ldap.conf
#
# LDAP Defaults
#
# See ldap.conf(5) for details
# This file should be world readable but not world writable.
BASE    dc=unixmen,dc=com
URI     ldap://192.168.1.200
#SIZELIMIT      12
#TIMELIMIT      15
#DEREF          never
# TLS certificates (needed for GnuTLS)
TLS_CACERT      /etc/ssl/certs/ca-certificates.crt
</code></pre><p>Run the Configuration assistant.</p>
<pre><code>unixmen@server:~$ sudo dpkg-reconfigure slapd
</code></pre><p>The following screen should appear. Select “No” and press Enter.</p>
<p><img src="/uploads/2014/03/unixmen@server-_0031.png" alt="configslapd"></p>
<p>Enter the DNS domain name.</p>
<p><img src="/uploads/2014/03/unixmen@server-_00111.png" alt="enter dns domain"></p>
<p>Enter the Organization name(i.e your company name).</p>
<p><img src="/uploads/2014/03/unixmen@server-_00211.png" alt="organization name"></p>
<p>Enter the LDAP admin password(This is a new config, so the password could be different from which you created in the earlier step).</p>
<p><img src="/uploads/2014/03/unixmen@server-_0061.png" alt="enter password"></p>
<p>Re-enter the password.</p>
<p><img src="/uploads/2014/03/unixmen@server-_0071.png" alt="confirm password"></p>
<p>Select the backend database.</p>
<p><img src="/uploads/2014/03/unixmen@server-_0081.png" alt="Select the backend database."></p>
<p>Select Yes to delete the database automatically when we are planning to remove LDAP server.</p>
<p><img src="/uploads/2014/03/unixmen@server-_0091.png" alt="Select Yes to delete the database automatically when we are planning to remove LDAP server."></p>
<p>Select Yes to move old database.</p>
<p><img src="/uploads/2014/03/unixmen@server-_0101.png" alt="Select Yes to move old database."></p>
<p>Select No and Press Enter.</p>
<p><img src="/uploads/2014/03/unixmen@server-_0111.png" alt="not allow ldapv2 protocol"></p>
<p>LDAP server is up and running now.</p>
<h3 id="Test-LDAP-server"><a href="#Test-LDAP-server" class="headerlink" title="Test LDAP server"></a>Test LDAP server</h3><p>Enter the following command “<strong>ldapsearch -x</strong>”, then you will have the following result.</p>
<pre><code>unixmen@server:~$ ldapsearch -x
# extended LDIF
#
# LDAPv3
# base &lt;dc=unixmen,dc=com&gt; (default) with scope subtree
# filter: (objectclass=*)
# requesting: ALL
#

# unixmen.com
dn: dc=unixmen,dc=com
objectClass: top
objectClass: dcObject
objectClass: organization
o: unixmen
dc: unixmen

# admin, unixmen.com
dn: cn=admin,dc=unixmen,dc=com
objectClass: simpleSecurityObject
objectClass: organizationalRole
cn: admin
description: LDAP administrator

# search result
search: 2
result: 0 Success

# numResponses: 3
# numEntries: 2
</code></pre><h3 id="LDAP-Server-Administration"><a href="#LDAP-Server-Administration" class="headerlink" title="LDAP Server Administration"></a>LDAP Server Administration</h3><p>本博客主要使用<a href="http://www.ldapadmin.org/" target="_blank" rel="external">LDAP Admin</a>，请参考<a href="/2014/03/28/%E4%BD%BF%E7%94%A8ldap-admin%E7%AE%A1%E7%90%86openldap/">使用LDAP Admin管理OpenLDAP</a>。</p>
<p><strong>phpldapadmin</strong> Debian系统中已经移除，可以自行安装，有如下几个注意点：</p>
<ul>
<li>必须安装<strong>php5-ldap</strong></li>
<li><a href="http://sourceforge.net/p/phpldapadmin/mailman/message/31302386/" target="_blank" rel="external">Fatal error: Cannot redeclare password_hash() in /srv/www/phpldapadmin-1.2.3/lib/functions.php on line 2236</a><ul>
<li>解决方案：<a href="http://sourceforge.net/u/nihilisticz/phpldapadmin/ci/7e53dab990748c546b79f0610c3a7a58431e9ebc/" target="_blank" rel="external">Fixed two issues to get phpLdapAdmin to work under PHP 5.5.x</a></li>
</ul>
</li>
</ul>
<p>具体使用参考<a href="http://www.unixmen.com/openldap-installation-configuration-ubuntu-12-1013-0413-10-debian-67-2/" target="_blank" rel="external">原文链接</a>。</p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/category/Linux/">Linux</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tag/ldap/">ldap</a><a href="/tag/OpenLDAP/">OpenLDAP</a><a href="/tag/debian/">debian</a><a href="/tag/phpldapadmin/">phpldapadmin</a><a href="/tag/slapd/">slapd</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://blog.kokonur.me/2014/03/28/转载-openldap-installation-and-configuration-in-ubuntu-server-debian/" data-title="[转载] OpenLDAP Installation and Configuration in Ubuntu Server / Debian | Kokonur" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2014/03/28/使用ldap-admin管理openldap/" title="使用LDAP Admin管理OpenLDAP">
  <strong>上一篇：</strong><br/>
  <span>
  使用LDAP Admin管理OpenLDAP</span>
</a>
</div>


<div class="next">
<a href="/2014/03/28/我要做一本内容与结构分离的教科书/"  title="我要做一本内容与结构分离的教科书">
 <strong>下一篇：</strong><br/> 
 <span>我要做一本内容与结构分离的教科书
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	
		<div class="ds-thread" data-thread-key="467" data-title="[转载] OpenLDAP Installation and Configuration in Ubuntu Server / Debian" data-url="http://blog.kokonur.me/2014/03/28/转载-openldap-installation-and-configuration-in-ubuntu-server-debian/"></div>
	
</section>



</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Install-OpenLDAP-in-Ubuntu-12-10-server"><span class="toc-number">1.</span> <span class="toc-text">Install OpenLDAP in Ubuntu 12.10 server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Configure-OpenLDAP"><span class="toc-number">2.</span> <span class="toc-text">Configure OpenLDAP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Test-LDAP-server"><span class="toc-number">3.</span> <span class="toc-text">Test LDAP server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LDAP-Server-Administration"><span class="toc-number">4.</span> <span class="toc-text">LDAP Server Administration</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/category/Gentoo/" title="Gentoo">Gentoo<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/category/LDAP/" title="LDAP">LDAP<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/category/Linux/" title="Linux">Linux<sup>16</sup></a></li>
		  
		
		  
			<li><a href="/category/NAS/" title="NAS">NAS<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/category/Travel/" title="Travel">Travel<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/category/Uncategorized/" title="Uncategorized">Uncategorized<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/category/Vim/" title="Vim">Vim<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/category/WSO2/" title="WSO2">WSO2<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/category/biomedical-engineering/" title="biomedical engineering">biomedical engineering<sup>10</sup></a></li>
		  
		
		  
			<li><a href="/category/bugs-vs-drugs/" title="bugs vs drugs">bugs vs drugs<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/category/itching-for-a-solution/" title="itching for a solution">itching for a solution<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/category/meta/" title="meta">meta<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/category/pieces-of-mechanisms/" title="pieces of mechanisms">pieces of mechanisms<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/category/sdr/" title="sdr">sdr<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/category/wordpress/" title="wordpress">wordpress<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/category/文献阅读/" title="文献阅读">文献阅读<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/category/碎碎念/" title="碎碎念">碎碎念<sup>11</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tag/ldap/" title="ldap">ldap<sup>9</sup></a></li>
			
		
			
				<li><a href="/tag/OpenLDAP/" title="OpenLDAP">OpenLDAP<sup>7</sup></a></li>
			
		
			
				<li><a href="/tag/IS/" title="IS">IS<sup>3</sup></a></li>
			
		
			
				<li><a href="/tag/wso2/" title="wso2">wso2<sup>3</sup></a></li>
			
		
			
				<li><a href="/tag/linux/" title="linux">linux<sup>3</sup></a></li>
			
		
			
				<li><a href="/tag/startssl/" title="startssl">startssl<sup>2</sup></a></li>
			
		
			
				<li><a href="/tag/LDAP-Admin/" title="LDAP Admin">LDAP Admin<sup>2</sup></a></li>
			
		
			
				<li><a href="/tag/travel/" title="travel">travel<sup>2</sup></a></li>
			
		
			
				<li><a href="/tag/ufw/" title="ufw">ufw<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/apache/" title="apache">apache<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/strongswan/" title="strongswan">strongswan<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/vpn/" title="vpn">vpn<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/regex-dnsmasq-ipset/" title="regex dnsmasq ipset">regex dnsmasq ipset<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/gdb/" title="gdb">gdb<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/build-gnuradio/" title="build-gnuradio">build-gnuradio<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/gnuradio/" title="gnuradio">gnuradio<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/https/" title="https">https<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/index/" title="index">index<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/grunt/" title="grunt">grunt<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/grunt-cli/" title="grunt-cli">grunt-cli<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://linuxtoy.org/" target="_blank" title="LinuxTOY">LinuxTOY</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
          <li>
            
            	<a href="http://scateu.me" target="_blank" title="Scateu&#39;s Blog">Scateu&#39;s Blog</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.byvoid.com/" target="_blank" title="BYVoid&#39;s Blog">BYVoid&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Yafeng Shan. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/cuckoohello" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		<a href="https://www.facebook.com/yafeng.shan" target="_blank" class="icon-facebook" title="facebook"></a>
		
		
		
		
		
		<a href="https://plus.google.com/110827390075659657828?rel=author" target="_blank" class="icon-google_plus" title="Google+"></a>
		
		
		<a href="mailto:cuckoo@kokonur.me" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		
				<div class="cc-license">
          <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
            <img src="/img/cc-by-nc-sa.svg" alt="Creative Commons" />
          </a>
        </div>
    

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="Yafeng Shan">Yafeng Shan</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
        getSize();
        if (myWidth >= 1024) {
          c.click();
        }
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#nothing"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"kokonur"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-63496916-1', 'blog.kokonur.me');  
ga('send', 'pageview');
</script>





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
