
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>gdb调试器用法 | Kokonur</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Yafeng Shan">
    

    
    <meta name="description" content="参考链接
GDB是GNU开源组织发布的一个强大的UNIX下的程序调试工具，GDB主要可帮助工程师完成下面4个方面的功能：

启动程序，可以按照工程师自定义的要求随心所欲的运行程序
让被调试的程序在工程师指定的断点处停住，断点可以是条件表达式
当程序被停住时，可以检查此时程序中所发生的事，并追索上文
动态地改变程序的执行环境。

不管是调试Linux内核空间的驱动还是调试用户空间的应用程序，掌握gd">
<meta property="og:type" content="article">
<meta property="og:title" content="gdb调试器用法">
<meta property="og:url" content="http://blog.kokonur.me/2011/04/08/gdb调试器用法/index.html">
<meta property="og:site_name" content="Kokonur">
<meta property="og:description" content="参考链接
GDB是GNU开源组织发布的一个强大的UNIX下的程序调试工具，GDB主要可帮助工程师完成下面4个方面的功能：

启动程序，可以按照工程师自定义的要求随心所欲的运行程序
让被调试的程序在工程师指定的断点处停住，断点可以是条件表达式
当程序被停住时，可以检查此时程序中所发生的事，并追索上文
动态地改变程序的执行环境。

不管是调试Linux内核空间的驱动还是调试用户空间的应用程序，掌握gd">
<meta property="og:updated_time" content="2016-08-29T00:38:32.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="gdb调试器用法">
<meta name="twitter:description" content="参考链接
GDB是GNU开源组织发布的一个强大的UNIX下的程序调试工具，GDB主要可帮助工程师完成下面4个方面的功能：

启动程序，可以按照工程师自定义的要求随心所欲的运行程序
让被调试的程序在工程师指定的断点处停住，断点可以是条件表达式
当程序被停住时，可以检查此时程序中所发生的事，并追索上文
动态地改变程序的执行环境。

不管是调试Linux内核空间的驱动还是调试用户空间的应用程序，掌握gd">
<link rel="publisher" href="110827390075659657828">

    
    <link rel="alternative" href="/atom.xml" title="Kokonur" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/favicon.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/favicon.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Kokonur" title="Kokonur"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Kokonur">Kokonur</a></h1>
				<h2 class="blog-motto">Tofu, fish and more sleep</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/toys">装备</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li>
 					
					<form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" autocomplete="off" name="q" maxlength="20" placeholder="搜索" />
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2011/04/08/gdb调试器用法/" title="gdb调试器用法" itemprop="url">gdb调试器用法</a>
  </h1>
  <p class="article-author">By
    
    <a href="/author/cuckoo" title="Yafeng Shan" target="_blank" itemprop="author">Yafeng Shan</a>
    
  <p class="article-time">
    <time datetime="2011-04-08T12:51:42.000Z" itemprop="datePublished"> 发表于 2011-04-08</time>
    
  </p>
</header>

	<div class="article-content">
		
		<p><a href="\">参考链接</a></p>
<p>GDB是GNU开源组织发布的一个强大的UNIX下的程序调试工具，GDB主要可帮助工程师完成下面4个方面的功能：</p>
<ul>
<li>启动程序，可以按照工程师自定义的要求随心所欲的运行程序</li>
<li>让被调试的程序在工程师指定的断点处停住，断点可以是条件表达式</li>
<li>当程序被停住时，可以检查此时程序中所发生的事，并追索上文</li>
<li>动态地改变程序的执行环境。</li>
</ul>
<p>不管是调试Linux内核空间的驱动还是调试用户空间的应用程序，掌握gdb的用法都是必须。而且，调试内核和调试应用程序时使用的gdb命令是完全相同的，下面以以下代码清单的应用程序为例演示gdb调试器的用法。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></div><div class="line">&#123;</div><div class="line">   <span class="keyword">return</span> a + b;</div><div class="line">&#125;</div><div class="line"></div><div class="line"> main()</div><div class="line">&#123;</div><div class="line">  <span class="keyword">int</span> sum[<span class="number">10</span>] =</div><div class="line">  &#123;</div><div class="line">    <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>    </div><div class="line">  &#125;  ;</div><div class="line">  <span class="keyword">int</span> i;</div><div class="line"></div><div class="line">  <span class="keyword">int</span> array1[<span class="number">10</span>] =</div><div class="line">  &#123;</div><div class="line">    <span class="number">48</span>, <span class="number">56</span>, <span class="number">77</span>, <span class="number">33</span>, <span class="number">33</span>, <span class="number">11</span>, <span class="number">226</span>, <span class="number">544</span>, <span class="number">78</span>, <span class="number">90</span></div><div class="line">  &#125;;</div><div class="line">  <span class="keyword">int</span> array2[<span class="number">10</span>] =</div><div class="line">  &#123;</div><div class="line">    <span class="number">85</span>, <span class="number">99</span>, <span class="number">66</span>, <span class="number">0x199</span>, <span class="number">393</span>, <span class="number">11</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span></div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</div><div class="line">  &#123;</div><div class="line">    sum[i] = add(array1[i], array2[i]);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<pre><code>使用命令`gcc –g gdb_example.c –o gdb_example`编译上述程序，得到包含调试信息的二进制文件example，执行`gdb gdb_example`命令进入调试状态：
</code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@localhost driver_study]<span class="comment"># gdb gdb_example</span></div><div class="line">GNU gdb Red Hat Linux (5.3post-0.20021129.18rh)</div><div class="line">Copyright 2003 Free Software Foundation, Inc.</div><div class="line">GDB is free software, covered by the GNU General Public License, and you are</div><div class="line">welcome to change it and/or distribute copies of it under certain conditions.</div><div class="line">Type \<span class="string">"show copying\" to see the conditions.</span></div><div class="line">There is absolutely no warranty for GDB.  Type \"show warranty\" for details.</div><div class="line">This GDB was configured as \"i386-redhat-linux-gnu\"...</div><div class="line">(gdb)</div></pre></td></tr></table></figure>
<pre><code>## list命令

在gdb中运行list命令（缩写l）可以列出代码，list的具体形式包括：
</code></pre><ul>
<li><p><code>list &lt;linenum&gt;</code> ，显示程序第linenum行周围的源程序，如：</p>
<blockquote>
<p>(gdb) list 15</p>
<pre><code>10

11        int array1[10] =
12        {
13          48, 56, 77, 33, 33, 11, 226, 544, 78, 90
14        };
15        int array2[10] =
16        {
17          85, 99, 66, 0x199, 393, 11, 1, 2, 3, 4
18        };
19
</code></pre></blockquote>
</li>
<li><p><code>list &lt;function&gt;</code> ，显示函数名为function的函数的源程序，如：</p>
<blockquote>
<p>(gdb) list main</p>
<pre><code>2       {
3         return a + b;
4       }
5
6       main()
7       {
8         int sum[10];
9         int i;
10

11        int array1[10] =
</code></pre></blockquote>
</li>
<li><p><code>list</code>，显示当前行后面的源程序。</p>
</li>
<li><p><code>list –</code>，显示当前行前面的源程序。</p>
<p>下面演示了使用gdb中的run（缩写r）、break（缩写b）、next（缩写n）命令控制程序的运行，并使用print（缩写p）命令打印程序中的变量sum的过程：</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">(gdb) <span class="built_in">break</span> add</div><div class="line">Breakpoint 1 at 0x80482f7: file gdb_example.c, line 3.</div><div class="line">(gdb) run  </div><div class="line">Starting program: /driver_study/gdb_example</div><div class="line"></div><div class="line">Breakpoint 1, add (a=48, b=85) at gdb_example.c:3</div><div class="line">warning: Source file is more recent than executable.</div><div class="line"></div><div class="line">3         <span class="built_in">return</span> a + b;</div><div class="line">(gdb) next</div><div class="line">4       &#125;</div><div class="line">(gdb) next</div><div class="line">main () at gdb_example.c:23</div><div class="line">23        <span class="keyword">for</span> (i = 0; i &lt; 10; i++)</div><div class="line">(gdb) next</div><div class="line">25          sum[i] = add(array1[i], array2[i]);</div><div class="line">(gdb) <span class="built_in">print</span> sum</div><div class="line"><span class="variable">$1</span> = &#123;133, 0, 0, 0, 0, 0, 0, 0, 0, 0&#125;</div></pre></td></tr></table></figure>
<pre><code>## run命令

在gdb中，运行程序使用run命令。在程序运行前，我们可以设置如下4方面的工作环境：
</code></pre><ul>
<li>程序运行参数<ul>
<li><code>set args</code> 可指定运行时参数，如：<code>set args 10 20 30 40 50</code>；<code>show args</code> 命令可以查看设置好的运行参数。</li>
</ul>
</li>
<li>运行环境<ul>
<li><code>path &lt;dir&gt;</code> 可设定程序的运行路径；<code>how paths</code>可查看程序的运行路径；<code>set environment varname [=value]</code>用于设置环境变量，如<code>set env USER=baohua；show environment [varname]</code>则用于查看环境变量。</li>
</ul>
</li>
<li>工作目录<ul>
<li><code>cd &lt;dir&gt;</code> 相当于shell的cd命令；<code>pwd</code> 显示当前所在的目录。</li>
</ul>
</li>
<li><p>程序的输入输出</p>
<ul>
<li><code>info terminal</code> 用于显示程序用到的终端的模式；gdb中也可以使用重定向控制程序输出，如<code>run &gt; outfile</code>；<code>tty</code>命令可以指定输入输出的终端设备，如：<code>tty /dev/ttyS1</code>。</li>
</ul>
<h2 id="break命令"><a href="#break命令" class="headerlink" title="break命令"></a>break命令</h2><p>在gdb中用<code>break</code>命令来设置断点，设置断点的方法包括：</p>
</li>
<li><p><code>break &lt;function&gt;</code></p>
<ul>
<li>在进入指定函数时停住，C++中可以使用class::function或function(type, type)格式来指定函数名。</li>
</ul>
</li>
<li><code>break &lt;linenum&gt;</code><ul>
<li>在指定行号停住。</li>
</ul>
</li>
<li><p><code>break +offset</code> / <code>break -offset</code></p>
<pre><code>*   在当前行号的前面或后面的offset行停住，offiset为自然数。
</code></pre></li>
<li><p><code>break filename:linenum</code></p>
<pre><code>*   在源文件filename的linenum行处停住。
</code></pre></li>
<li><p><code>break filename:function</code></p>
<pre><code>*   在源文件filename的function函数的入口处停住。
</code></pre></li>
<li><p><code>break *address</code></p>
<pre><code>*   在程序运行的内存地址处停住。
</code></pre></li>
<li><p><code>break</code></p>
<pre><code>*   break命令没有参数时，表示在下一条指令处停住。
</code></pre></li>
<li><p><code>break ... if &lt;condition&gt;</code></p>
<pre><code>*   “…”可以是上述的b`reak &lt;linenum&gt;`、`break +offset` / `break –offset`中的参数，condition表示条件，在条件成立时停住。比如在循环体中，可以设置`break if i=100`，表示当i为100时停住程序。 查看断点时，可使用`info`命令，如`info breakpoints [n]`、`info break [n]`（n表示断点号）。
</code></pre><h2 id="单步命令"><a href="#单步命令" class="headerlink" title="单步命令"></a>单步命令</h2><p>在 调试过程中，next命令用于单步执行，类似VC++中的step over。next的单步不会进入函数的内部，与next对应的step（缩写s）命令则在单步执行一个函数时，会进入其内部，类似VC++中的step into。下面演示了step命令的执行情况，在23行的add()函数调用处执行step会进入其内部的“return a+b;”语句：</p>
<pre>`(gdb) break 25
Breakpoint 1 at 0x8048362: file gdb_example.c, line 25.
(gdb) run
Starting program: /driver_study/gdb_example

Breakpoint 1, main () at gdb_example.c:25
25          sum[i] = add(array1[i], array2[i]);
(gdb) step
add (a=48, b=85) at gdb_example.c:3
3         return a + b;
`</pre>

<p>单步执行的更复杂用法包括：</p>
</li>
<li><p>step <count></count></p>
<pre><code>*   单步跟踪，如果有函数调用，则进入该函数（进入函数的前提是，此函数被编译有debug信息）。step后面不加count表示一条条地执行，加表示执行后面的count条指令，然后再停住。
</code></pre></li>
<li><p>next <count></count></p>
<pre><code>*   单步跟踪，如果有函数调用，它不会进入该函数。同样地，next后面不加count表示一条条地执行，加表示执行后面的count条指令，然后再停住。
</code></pre></li>
<li><p>set step-mode</p>
<pre><code>*   set step-mode on用于打开step-mode模式，这样，在进行单步跟踪时，程序不会因为没有debug信息而不停住，这个参数的设置可便于查看机器码。set step-mod off用于关闭step-mode模式。
</code></pre></li>
<li><p>finish</p>
<pre><code>*   运行程序，直到当前函数完成返回，并打印函数返回时的堆栈地址和返回值及参数值等信息。
</code></pre></li>
<li><p>until （缩写u）</p>
<pre><code>*   一直在循环体内执行单步，退不出来是一件令人烦恼的事情，until命令可以运行程序直到退出循环体。
</code></pre></li>
<li><p>stepi（缩写si）和nexti（缩写ni）</p>
<pre><code>*   stepi和nexti用于单步跟踪一条机器指令，一条程序代码有可能由数条机器指令完成，stepi和nexti可以单步执行机器指令。 另外，运行“display/i $pc”命令后，单步跟踪会在打出程序代码的同时打出机器指令，即汇编代码。
</code></pre><h2 id="continue命令"><a href="#continue命令" class="headerlink" title="continue命令"></a>continue命令</h2><p>当程序被停住后，可以使用continue命令（缩写c，fg命令同continue命令）恢复程序的运行直到程序结束，或到达下一个断点，命令格式为：</p>
<pre>`continue [ignore-count]
c [ignore-count]
fg [ignore-count]
`</pre>

<p>ignore-count表示忽略其后多少次断点。 假设我们设置了函数断点add()，并watch i，则在continue过程中，每次遇到add()函数或i发生变化，程序就会停住，如：</p>
<pre>`(gdb) continue
Continuing.
Hardware watchpoint 3: i

Old value = 2
New value = 3
0x0804838d in main () at gdb_example.c:23
23        for (i = 0; i < 10; i++)
(gdb) continue
Continuing.

Breakpoint 1, main () at gdb_example.c:25
25          sum[i] = add(array1[i], array2[i]);
(gdb) continue
Continuing.
Hardware watchpoint 3: i

Old value = 3
New value = 4
0x0804838d in main () at gdb_example.c:23
23        for (i = 0; i < 10; i++)
`</pre>

<h2 id="print命令"><a href="#print命令" class="headerlink" title="print命令"></a>print命令</h2><p>在调试程序时，当程序被停住时，可以使用print命令（缩写为p），或是同义命令inspect来查看当前程序的运行数据。print命令的格式是：</p>
<pre>` print <expr>
 print /<f> <expr>
`</expr></f></expr></pre>

<p><code>&lt;expr&gt;</code>是表达式，是被调试的程序中的表达式，<code>&lt;f&gt;</code>是输出的格式，比如，如果要把表达式按16进制的格式输出，那么就是<code>/x</code>。在表达式中，有几种GDB所支持的操作符，它们可以用在任何一种语言中，“@”是一个和数组有关的操作符，“::”指定一个在文件或是函数中的变量，“<code>{&lt;type&gt;} &lt;addr&gt;</code>”表示一个指向内存地址<code>&lt;addr</code>&gt;的类型为type的一个对象。<br>下面演示了查看sum[]数组的值的过程：</p>
<pre>`(gdb) print sum
$2 = {133, 155, 0, 0, 0, 0, 0, 0, 0, 0}
(gdb) next

Breakpoint 1, main () at gdb_example.c:25
25          sum[i] = add(array1[i], array2[i]);
(gdb) next
23        for (i = 0; i < 10; i++)
(gdb) print sum
$3 = {133, 155, 143, 0, 0, 0, 0, 0, 0, 0}
`</pre>

<p>当需要查看一段连续内存空间的值的时间，可以使用GDB的“@”操作符，“@”的左边是第一个内存地址，“@”的右边则是想查看内存的长度。例如如下动态申请的内存：</p>
<pre>`int *array = (int *) malloc (len * sizeof (int));
`</pre>

<p>在GDB调试过程中这样显示出这个动态数组的值：</p>
<pre>`p *array@len
`</pre>

<p>print的输出格式包括：</p>
</li>
<li><p>x 按十六进制格式显示变量。</p>
</li>
<li>d 按十进制格式显示变量。</li>
<li>u 按十六进制格式显示无符号整型。</li>
<li>o 按八进制格式显示变量。</li>
<li>t 按二进制格式显示变量。</li>
<li>a 按十六进制格式显示变量。</li>
<li>c 按字符格式显示变量。</li>
<li><p>f 按浮点数格式显示变量。</p>
<p>我们可用display命令设置一些自动显示的变量，当程序停住时，或是单步跟踪时，这些变量会自动显示。 如果要修改变量，如x的值，可使用如下命令：</p>
<pre>`print x=4
`</pre>

<p>当用GDB的print查看程序运行时的数据时，每一个print都会被GDB记录下来。GDB会以<code>$1，$2，$3 …</code>这样的方式为每一个print命令编号。我们可以使用这个编号访问以前的表达式，如<code>$1</code>。</p>
<h2 id="watch命令"><a href="#watch命令" class="headerlink" title="watch命令"></a>watch命令</h2><p>watch一般来观察某个表达式（变量也是一种表达式）的值是否有变化了，如果有变化，马上停住程序。我们有下面的几种方法来设置观察点： <code>watch &lt;expr&gt;</code>：为表达式（变量）expr设置一个观察点。一量表达式值有变化时，马上停住程序。 <code>rwatch &lt;expr&gt;</code>：当表达式（变量）expr被读时，停住程序。 <code>awatch &lt;expr&gt;</code>：当表达式（变量）的值被读或被写时，停住程序。 <code>info watchpoints</code>：列出当前所设置了的所有观察点。</p>
<p>下面演示了观察i并在连续运行next时一旦发现i变化，i值就会显示出来的过程：</p>
<pre>`(gdb) watch i
Hardware watchpoint 3: i
(gdb) next
23        for (i = 0; i < 10; i++)
(gdb) next
Hardware watchpoint 3: i

Old value = 0
New value = 1
0x0804838d in main () at gdb_example.c:23
23        for (i = 0; i < 10; i++)
(gdb) next

Breakpoint 1, main () at gdb_example.c:25
25          sum[i] = add(array1[i], array2[i]);
(gdb) next
23        for (i = 0; i < 10; i++)
(gdb) next
Hardware watchpoint 3: i

Old value = 1
New value = 2
0x0804838d in main () at gdb_example.c:23
23        for (i = 0; i < 10; i++)
`</pre>

<h2 id="examine命令"><a href="#examine命令" class="headerlink" title="examine命令"></a>examine命令</h2><p>我们可以使用examine命令（缩写为x）来查看内存地址中的值。examine命令的语法如下所示：</p>
<pre>`x/<n f="" u=""> <addr>
`</addr></n></pre>

<p><code>&lt;addr&gt;</code>表示一个内存地址。“x/”后 的n、f、u都是可选的参数，n 是一个正整数，表示显示内存的长度，也就是说从当前地址向后显示几个地址的内容；f 表示显示的格式，如果地址所指的是字符串，那么格式可以是s，如果地址是指令地址，那么格式可以是i；u 表示从当前地址往后请求的字节数，如果不指定的话，GDB默认是4字节。u参数可以被一些字符代替：b表示单字节，h表示双字节，w表示四字节，g表示八 字节。当我们指定了字节长度后，GDB会从指定的内存地址开始，读写指定字节，并把其当作一个值取出来。n、f、u这3个参数可以一起使用，例如命令“<code>x/3uh 0x54320</code>”表 示从内存地址0×54320开始以双字节为1个单位（h）、16进制方式（u）显示3个单位（3）的内存。 == 9、set命令 修改寄存器： <code>(gdb) set $v0 = 0×004000000 (gdb) set $epc = 0xbfc00000</code> 修改内存： <code>(gdb) set {unsigned int}0x8048a51=0×0 (gdb) set (unsigned int)0x8048a54=0x55aa55aa</code></p>
<h2 id="jump命令"><a href="#jump命令" class="headerlink" title="jump命令"></a>jump命令</h2><p>一般来说，被调试程序会按照程序代码的运行顺序依次执行，但是GDB也提供了乱序执行的功能，也就是说，GDB可以修改程序的执行顺序，从而让程序随意跳跃。这个功能可以由GDB的jump命令： <code>jump &lt;linespec&gt;</code> 来指定下一条语句的运行点。<code>&lt;linespec&gt;</code>可以是文件的行号，可以是file:line格式，也可以是+num这种偏移量格式，表示下一条运行语句从哪里开始。 <code>jump &lt;address&gt;</code> 这里的<code>&lt;address&gt;</code>是代码行的内存地址。 注意，jump命令不会改变当前的程序栈中的内容，所以，如果使用jump从一个函数跳转到另一个函数，当跳转到的函数运行完返回，进行出栈操作时必然会发生错误，这可能导致意想不到的结果，所以最好只用jump在同一个函数中进行跳转。</p>
<h2 id="signal命令"><a href="#signal命令" class="headerlink" title="signal命令"></a>signal命令</h2><p>使用singal命令，可以产生一个信号量给被调试的程序，如中断信号“Ctrl+C”。这非常方便于程序的调试，可以在程序运行的任意位置设置断点，并在该断点用GDB产生一个信号量，这种精确地在某处产生信号的方法非常有利于程序的调试。 signal命令的语法是：<code>signal &lt;signal&gt;</code>，UNIX的系统信号量通常从1到15，所以<code>&lt;signal&gt;</code>取值也在这个范围。</p>
<h2 id="return命令"><a href="#return命令" class="headerlink" title="return命令"></a>return命令</h2><p>如果在函数中设置了调试断点，在断点后还有语句没有执行完，这时候我们可以使用return命令强制函数忽略还没有执行的语句并返回。</p>
<pre>`return
return <expression>
`</expression></pre>

<p>上述return命令用于取消当前函数的执行，并立即返回，如果指定了<code>&lt;expression&gt;</code>，那么该表达式的值会被作为函数的返回值。</p>
<h2 id="call命令"><a href="#call命令" class="headerlink" title="call命令"></a>call命令</h2><p>call命令用于强制调用某函数： <code>call &lt;expr&gt;</code> 表达式中可以一是函数，以此达到强制调用函数的目的，它会显示函数的返回值（如果函数返回值不是void）。 其实，前面介绍的print命令也可以完成强制调用函数的功能。</p>
<h2 id="info命令"><a href="#info命令" class="headerlink" title="info命令"></a>info命令</h2><p>info命令可以在调试时用来查看寄存器、断点、观察点和信号等信息。要查看寄存器的值，可以使用如下命令： <code>info registers</code> （查看除了浮点寄存器以外的寄存器） <code>info all-registers</code> （查看所有寄存器，包括浮点寄存器） <code>info registers &lt;regname ...&gt;</code> （查看所指定的寄存器） 要查看断点信息，可以使用如下命令： <code>info break</code> 列出当前所设置的所有观察点，使用如下命令： <code>info watchpoints</code> 查看有哪些信号正在被GDB检测，使用如下命令： <code>info signals info handle</code> 也可以使用<code>info line</code>命令来查看源代码在内存中的地址。<code>info line</code>后面可以跟行号、函数名、文件名:行号、文件名:函数名等多种形式，例如下面的命令会打印出所指定的源码在运行时的内存地址：</p>
<pre>`info line tst.c:func
`</pre>

<h2 id="disassemble"><a href="#disassemble" class="headerlink" title="disassemble"></a>disassemble</h2><p>disassemble命令用于反汇编，它可被用来查看当前执行时的源代码的机器码，其实际上只是把目前内存中的指令dump出来。下面的示例用于查看函数func的汇编代码：</p>
<p><pre>`(gdb) disassemble func<br>Dump of assembler code for function func:<br>0x8048450 <func>:       push   %ebp<br>0x8048451 <func+1>:     mov    %esp,%ebp<br>0x8048453 <func+3>:     sub    $0x18,%esp<br>0x8048456 <func+6>:     movl   $0x0,0xfffffffc(%ebp)<br>…<br>End of assembler dump.</func+6></func+3></func+1></func></pre></p>
</li>
</ul>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/category/Linux/">Linux</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tag/gdb/">gdb</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://blog.kokonur.me/2011/04/08/gdb调试器用法/" data-title="gdb调试器用法 | Kokonur" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2011/05/11/vim-杀手级-tip-快速处理配对标点符号中的文本/" title="Vim 杀手级 Tip: 快速处理配对标点符号中的文本">
  <strong>上一篇：</strong><br/>
  <span>
  Vim 杀手级 Tip: 快速处理配对标点符号中的文本</span>
</a>
</div>


<div class="next">
<a href="/2011/04/02/8-ways-to-share-your-git-repository/"  title="8 ways to share your git repository">
 <strong>下一篇：</strong><br/> 
 <span>8 ways to share your git repository
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	
		<div class="ds-thread" data-thread-key="35" data-title="gdb调试器用法" data-url="http://blog.kokonur.me/2011/04/08/gdb调试器用法/"></div>
	
</section>



</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#break命令"><span class="toc-number">1.</span> <span class="toc-text">break命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#单步命令"><span class="toc-number">2.</span> <span class="toc-text">单步命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#continue命令"><span class="toc-number">3.</span> <span class="toc-text">continue命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#print命令"><span class="toc-number">4.</span> <span class="toc-text">print命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#watch命令"><span class="toc-number">5.</span> <span class="toc-text">watch命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#examine命令"><span class="toc-number">6.</span> <span class="toc-text">examine命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jump命令"><span class="toc-number">7.</span> <span class="toc-text">jump命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#signal命令"><span class="toc-number">8.</span> <span class="toc-text">signal命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#return命令"><span class="toc-number">9.</span> <span class="toc-text">return命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#call命令"><span class="toc-number">10.</span> <span class="toc-text">call命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#info命令"><span class="toc-number">11.</span> <span class="toc-text">info命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#disassemble"><span class="toc-number">12.</span> <span class="toc-text">disassemble</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/category/Gentoo/" title="Gentoo">Gentoo<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/category/LDAP/" title="LDAP">LDAP<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/category/Linux/" title="Linux">Linux<sup>16</sup></a></li>
		  
		
		  
			<li><a href="/category/NAS/" title="NAS">NAS<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/category/Travel/" title="Travel">Travel<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/category/Uncategorized/" title="Uncategorized">Uncategorized<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/category/Vim/" title="Vim">Vim<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/category/WSO2/" title="WSO2">WSO2<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/category/biomedical-engineering/" title="biomedical engineering">biomedical engineering<sup>10</sup></a></li>
		  
		
		  
			<li><a href="/category/bugs-vs-drugs/" title="bugs vs drugs">bugs vs drugs<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/category/itching-for-a-solution/" title="itching for a solution">itching for a solution<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/category/meta/" title="meta">meta<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/category/pieces-of-mechanisms/" title="pieces of mechanisms">pieces of mechanisms<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/category/sdr/" title="sdr">sdr<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/category/wordpress/" title="wordpress">wordpress<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/category/文献阅读/" title="文献阅读">文献阅读<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/category/碎碎念/" title="碎碎念">碎碎念<sup>11</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tag/ldap/" title="ldap">ldap<sup>9</sup></a></li>
			
		
			
				<li><a href="/tag/OpenLDAP/" title="OpenLDAP">OpenLDAP<sup>7</sup></a></li>
			
		
			
				<li><a href="/tag/IS/" title="IS">IS<sup>3</sup></a></li>
			
		
			
				<li><a href="/tag/wso2/" title="wso2">wso2<sup>3</sup></a></li>
			
		
			
				<li><a href="/tag/linux/" title="linux">linux<sup>3</sup></a></li>
			
		
			
				<li><a href="/tag/startssl/" title="startssl">startssl<sup>2</sup></a></li>
			
		
			
				<li><a href="/tag/LDAP-Admin/" title="LDAP Admin">LDAP Admin<sup>2</sup></a></li>
			
		
			
				<li><a href="/tag/travel/" title="travel">travel<sup>2</sup></a></li>
			
		
			
				<li><a href="/tag/ufw/" title="ufw">ufw<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/apache/" title="apache">apache<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/strongswan/" title="strongswan">strongswan<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/vpn/" title="vpn">vpn<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/regex-dnsmasq-ipset/" title="regex dnsmasq ipset">regex dnsmasq ipset<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/build-gnuradio/" title="build-gnuradio">build-gnuradio<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/gnuradio/" title="gnuradio">gnuradio<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/gdb/" title="gdb">gdb<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/https/" title="https">https<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/index/" title="index">index<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/grunt/" title="grunt">grunt<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/grunt-cli/" title="grunt-cli">grunt-cli<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://linuxtoy.org/" target="_blank" title="LinuxTOY">LinuxTOY</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
          <li>
            
            	<a href="http://scateu.me" target="_blank" title="Scateu&#39;s Blog">Scateu&#39;s Blog</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.byvoid.com/" target="_blank" title="BYVoid&#39;s Blog">BYVoid&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Yafeng Shan. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/cuckoohello" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		<a href="https://www.facebook.com/yafeng.shan" target="_blank" class="icon-facebook" title="facebook"></a>
		
		
		
		
		
		<a href="https://plus.google.com/110827390075659657828?rel=author" target="_blank" class="icon-google_plus" title="Google+"></a>
		
		
		<a href="mailto:cuckoo@kokonur.me" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		
				<div class="cc-license">
          <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
            <img src="/img/cc-by-nc-sa.svg" alt="Creative Commons" />
          </a>
        </div>
    

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="Yafeng Shan">Yafeng Shan</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
        getSize();
        if (myWidth >= 1024) {
          c.click();
        }
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#nothing"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"kokonur"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-63496916-1', 'blog.kokonur.me');  
ga('send', 'pageview');
</script>





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
